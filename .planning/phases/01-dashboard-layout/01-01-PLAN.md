---
phase: 01-dashboard-layout
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/dashboard/page.tsx
  - components/dashboard/analytics-overview.tsx
autonomous: true

must_haves:
  truths:
    - "User sees 4 stat cards displayed on left side of dashboard"
    - "User sees analytics chart on right side, visually smaller than full-width"
    - "User can click expand button to make analytics chart full-width"
    - "User can click collapse button to return analytics chart to normal size"
    - "Dashboard stacks vertically on mobile without horizontal scroll"
  artifacts:
    - path: "app/dashboard/page.tsx"
      provides: "Dashboard layout with 3-column grid"
      contains: "grid-cols-1 lg:grid-cols-3"
    - path: "components/dashboard/analytics-overview.tsx"
      provides: "Expandable analytics component with toggle button"
      contains: "isExpanded"
      contains: "aria-expanded"
  key_links:
    - from: "components/dashboard/analytics-overview.tsx"
      to: "parent grid in page.tsx"
      via: "conditional lg:col-span-3 vs lg:col-span-1 className"
      pattern: "lg:col-span-"
---

<objective>
Restructure the dashboard overview page to display stat cards on the left (2/3 width) and analytics chart on the right (1/3 width), with the ability to expand the analytics chart to full width.

Purpose: Give clients a cleaner information hierarchy - key metrics visible at a glance on the left, with analytics available but not dominating the view. Expansion option preserves the detailed chart view when needed.

Output: Updated dashboard page with responsive 3-column grid layout and expandable analytics component.
</objective>

<execution_context>
@C:\Users\eryde\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\eryde\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-dashboard-layout/01-RESEARCH.md
@app/dashboard/page.tsx
@components/dashboard/analytics-overview.tsx
@components/ui/button.tsx
@lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure dashboard page layout to 3-column grid with stat cards on left</name>
  <files>app/dashboard/page.tsx</files>
  <action>
Modify the dashboard page layout to create a responsive 3-column grid:

1. After the Welcome Header section, create a new grid container:
   - Use `grid grid-cols-1 lg:grid-cols-3 gap-6`
   - This stacks on mobile (grid-cols-1) and shows 3 columns on desktop (lg:grid-cols-3)

2. Create a left section for stat cards:
   - Wrap the 4 stat cards in a div with `lg:col-span-2 space-y-6`
   - Inside that div, keep the stat cards grid: `grid grid-cols-1 md:grid-cols-2 gap-4`
   - Move the current Stats Overview grid (Total Documents, Unread Messages, Overall Progress, Pending Payments) into this left section

3. Place the AnalyticsOverview component as the right section:
   - The AnalyticsOverview will control its own column span (handled in Task 2)
   - Remove the current AnalyticsOverview placement at the top of the page
   - Place it as a sibling to the left section, inside the new 3-column grid

4. Keep everything BELOW this new grid section unchanged:
   - Quick Actions
   - Progress Tracking and Recent Activity (grid gap-4 md:grid-cols-2 lg:grid-cols-7)
   - Recent Documents and Notifications

The page should remain a server component (async function, no "use client").

Key pattern from research:
```tsx
<div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
  <div className="lg:col-span-2 space-y-6">
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
      {/* 4 stat cards */}
    </div>
  </div>
  <AnalyticsOverview ... />
</div>
```
  </action>
  <verify>
Run `npm run build` - should compile without errors.
Visually verify in browser at http://localhost:3000/dashboard:
- On desktop (1024px+): Stat cards on left taking 2/3 width, analytics on right taking 1/3
- On mobile: Everything stacks vertically
  </verify>
  <done>
Dashboard shows 4 stat cards on left side, analytics chart on right side on desktop. Mobile view stacks vertically without horizontal scroll.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add expand/collapse functionality to AnalyticsOverview component</name>
  <files>components/dashboard/analytics-overview.tsx</files>
  <action>
Modify the AnalyticsOverview component to support expand/collapse:

1. Add state for expansion:
   ```tsx
   const [isExpanded, setIsExpanded] = useState(false)
   ```

2. Import Maximize2 and Minimize2 icons from lucide-react (add to existing import)

3. Import cn utility from @/lib/utils

4. Wrap the Card in a div that controls column spanning:
   ```tsx
   <div className={cn(
     "transition-all duration-300",
     isExpanded ? "lg:col-span-3" : "lg:col-span-1"
   )}>
     <Card className="w-full">
       ...
     </Card>
   </div>
   ```

5. Add expand/collapse button in the CardHeader, next to the title:
   - Position: flex row with justify-between on CardHeader
   - Button attributes:
     - onClick={() => setIsExpanded(!isExpanded)}
     - aria-expanded={isExpanded}
     - aria-label={isExpanded ? "Collapse chart to normal size" : "Expand chart to full width"}
     - variant="outline"
     - size="icon" (or "sm" if icon size doesn't exist)
     - className="hidden lg:flex" (hide on mobile since it's always full width there)
   - Icon: Show Minimize2 when expanded, Maximize2 when collapsed

6. Keep existing CardTitle and CardDescription, but adjust header layout:
   ```tsx
   <CardHeader className="flex flex-row items-center justify-between">
     <div>
       <CardTitle className="text-2xl">Campaign Performance</CardTitle>
       <CardDescription>
         Track your advertising metrics...
       </CardDescription>
     </div>
     <Button ... />
   </CardHeader>
   ```

The component already has "use client" directive and useState imported, so only add the new state and icon imports.
  </action>
  <verify>
Run `npm run build` - should compile without errors.
In browser at http://localhost:3000/dashboard:
1. See expand button (icon) in analytics card header on desktop
2. Click expand - chart grows to full width (takes all 3 columns)
3. Click collapse - chart returns to 1/3 width
4. On mobile - button is hidden, chart is always full width
5. Inspect element - verify aria-expanded attribute toggles between "true" and "false"
  </verify>
  <done>
Analytics chart has working expand/collapse button. Expanded state shows full-width chart (lg:col-span-3). Collapsed state shows 1/3 width (lg:col-span-1). Button is accessible with aria-expanded attribute.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Dashboard layout restructured with stat cards on left (2/3) and expandable analytics chart on right (1/3)</what-built>
  <how-to-verify>
1. Start dev server if not running: `npm run dev`
2. Open http://localhost:3000/dashboard in browser
3. Desktop view (resize to 1024px+):
   - Verify: 4 stat cards appear on LEFT side in 2x2 grid
   - Verify: Analytics chart appears on RIGHT side, smaller than before
   - Click expand button (top-right of analytics card) - chart should grow to full width
   - Click collapse button - chart should return to 1/3 width
4. Mobile view (resize to <768px or use DevTools mobile):
   - Verify: All content stacks vertically
   - Verify: No horizontal scroll bar
   - Verify: Expand button is hidden (not needed on mobile)
5. Tablet view (768px - 1023px):
   - Verify: Stat cards are 2 columns
   - Verify: Layout still works (may be stacked or side-by-side depending on breakpoint)
  </how-to-verify>
  <resume-signal>Type "approved" if layout looks correct, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
- `npm run build` passes without TypeScript or build errors
- Desktop (lg:1024px+): 3-column layout with stat cards left (2 cols), analytics right (1 col)
- Analytics expand button visible on desktop, toggles between lg:col-span-1 and lg:col-span-3
- Mobile (< 1024px): Single column layout, all content stacks
- No horizontal scroll on any viewport
- aria-expanded attribute on expand button reflects current state
</verification>

<success_criteria>
- DASH-01: 4 stat cards display on left side of dashboard (2/3 width on desktop)
- DASH-02: Analytics chart displays on right side, smaller than current full-width size
- DASH-03: Analytics chart can be expanded to full-width via button click, and collapsed back
- DASH-04: Dashboard layout is responsive - stacks on mobile without horizontal scroll
</success_criteria>

<output>
After completion, create `.planning/phases/01-dashboard-layout/01-01-SUMMARY.md`
</output>
