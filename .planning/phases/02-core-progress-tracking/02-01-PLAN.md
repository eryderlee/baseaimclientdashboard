---
phase: 02-core-progress-tracking
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - prisma/schema.prisma
  - lib/types/milestone.ts
  - prisma/seed-milestones.ts
autonomous: true

must_haves:
  truths:
    - "Milestone model includes notes field for storing progress changelog entries"
    - "TypeScript types define MilestoneNote structure with id, content, createdAt, createdBy"
    - "Standard milestone template exists with 6 milestones matching BaseAim service process"
  artifacts:
    - path: "prisma/schema.prisma"
      provides: "Milestone model with notes Json field"
      contains: "notes Json?"
    - path: "lib/types/milestone.ts"
      provides: "TypeScript types for Milestone and MilestoneNote"
      exports: ["Milestone", "MilestoneNote", "MilestoneStatus"]
    - path: "prisma/seed-milestones.ts"
      provides: "Standard milestone template seed function"
      exports: ["seedStandardMilestones", "STANDARD_MILESTONES"]
  key_links:
    - from: "lib/types/milestone.ts"
      to: "prisma/schema.prisma"
      via: "MilestoneStatus enum mirrors Prisma enum"
      pattern: "NOT_STARTED.*IN_PROGRESS.*COMPLETED"
---

<objective>
Add notes field to Milestone schema and create standard milestone template for all clients

Purpose: Establish the data foundation for progress tracking (PROG-08, PROG-09). All clients follow the same standard milestones reflecting BaseAim's service process.

Output: Updated Prisma schema with notes field, TypeScript types for milestone data, and seed function for standard milestones.
</objective>

<execution_context>
@C:\Users\eryde\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\eryde\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-progress-tracking/02-RESEARCH.md
@prisma/schema.prisma
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add notes field to Milestone model in Prisma schema</name>
  <files>prisma/schema.prisma</files>
  <action>
Update the Milestone model in prisma/schema.prisma to add a notes field for storing progress changelog entries.

Add this field after the existing `order` field:
```prisma
notes     Json?     @default("[]")
```

The notes field:
- Type: Json (nullable with default empty array)
- Purpose: Store array of MilestoneNote objects (mini-changelog entries per PROG-09)
- Structure: Each note has { id, content, createdAt, createdBy }

Do NOT run prisma db push or migrate - this is schema definition only. Migration will be handled separately when database is ready.
  </action>
  <verify>
Run `npx prisma format` to validate schema syntax. Check that the Milestone model includes the notes field.
  </verify>
  <done>Milestone model has `notes Json? @default("[]")` field in schema.prisma</done>
</task>

<task type="auto">
  <name>Task 2: Create TypeScript types for Milestone and MilestoneNote</name>
  <files>lib/types/milestone.ts</files>
  <action>
Create a new file `lib/types/milestone.ts` with TypeScript types that mirror the Prisma schema and add structure for the JSON notes field.

Define these types:
1. `MilestoneStatus` - enum matching Prisma: NOT_STARTED, IN_PROGRESS, COMPLETED, BLOCKED
2. `MilestoneNote` - interface for changelog entries: { id: string, content: string, createdAt: string (ISO), createdBy: string }
3. `Milestone` - interface matching Prisma model + typed notes array
4. `MilestoneWithClient` - Milestone with client relation for queries

Include JSDoc comments explaining each type's purpose.

Export all types for use across the codebase.
  </action>
  <verify>
Run `npx tsc --noEmit lib/types/milestone.ts` to verify types compile without errors.
  </verify>
  <done>TypeScript types exist at lib/types/milestone.ts with MilestoneStatus, MilestoneNote, Milestone, MilestoneWithClient exports</done>
</task>

<task type="auto">
  <name>Task 3: Create standard milestone template seed function</name>
  <files>prisma/seed-milestones.ts</files>
  <action>
Create a new file `prisma/seed-milestones.ts` with:

1. `STANDARD_MILESTONES` constant array defining the 6 standard milestones for all BaseAim clients:
   - Order 1: "Client Onboarding" - Initial setup, requirements gathering, strategy alignment
   - Order 2: "Ad Account Setup" - Connect Google/Meta Ads accounts, grant BaseAim access
   - Order 3: "Landing Page Development" - Design and build conversion-optimized landing pages
   - Order 4: "Campaign Build" - Create ad campaigns, audiences, and creatives
   - Order 5: "Launch" - Go live with ads, initial optimization
   - Order 6: "Ongoing Optimization" - Continuous improvement, reporting, scaling

Each milestone object should have:
- title: string
- description: string (1-2 sentences explaining what it means per PROG-05)
- order: number (1-6)
- status: "NOT_STARTED" (default)
- progress: 0 (default)
- dueDate: null (to be set per-client)
- notes: [] (empty array)

2. `seedStandardMilestones(clientId: string)` async function that:
   - Takes a clientId parameter
   - Creates all 6 milestones for that client using Prisma
   - Returns the created milestones

Export both STANDARD_MILESTONES and seedStandardMilestones for use in client onboarding flows.

Note: This is a utility function, not the main seed file. It will be called during client creation in Phase 3.
  </action>
  <verify>
Run `npx tsc --noEmit prisma/seed-milestones.ts` to verify the file compiles. Check that STANDARD_MILESTONES has exactly 6 items with orders 1-6.
  </verify>
  <done>Standard milestone template exists with 6 milestones matching BaseAim service process (onboarding -> ad account -> landing page -> campaign -> launch -> optimization)</done>
</task>

</tasks>

<verification>
1. Schema validation: `npx prisma format` succeeds without errors
2. Type checking: `npx tsc --noEmit` passes for new type files
3. Standard milestones: STANDARD_MILESTONES array contains exactly 6 milestones with sequential orders 1-6
4. Each milestone has: title, description (1-2 sentences), order, status, progress, notes fields
</verification>

<success_criteria>
- Prisma schema updated with notes Json field on Milestone model
- TypeScript types created for Milestone, MilestoneNote, MilestoneStatus
- Standard milestone template defined with 6 milestones matching BaseAim process
- All files compile without TypeScript errors
- No database migrations run (schema ready for future migration)
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-progress-tracking/02-01-SUMMARY.md`
</output>
